<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Companion - Dear Mama</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="logo-text">Dear mama</span>
                </div>
                <ul class="nav-links">
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="/baby-tracker.html">Baby Wellness</a></li>
                    <li><a href="/mother-wellness.html">Mother Wellness</a></li>
                    <li><a href="/ai-companion.html" class="active">AI Companion</a></li>
                </ul>
  <div class="nav-actions">
  <a id="nav-signin" class="nav-link-btn" href="signin.html">Sign In</a>
  <a id="nav-getstarted" class="btn-primary" href="signup.html">Get Started</a>
  <a id="nav-logout" class="nav-link-btn" href="#" style="display:none;">Log out</a>
</div>

    </nav>

    <!-- Chat Interface -->
    <div style="display: flex; height: calc(100vh - 73px);">
        <!-- Chat Area -->
        <div style="flex: 1; display: flex; flex-direction: column; background: var(--gray-50);">
          
            <!-- Messages -->
            <div id="chat-messages" style="flex: 1; overflow-y: auto; padding: 40px 24px;">
                <div style="max-width: 900px; margin: 0 auto;">
                    <!-- AI Message -->
                    <div style="display: flex; justify-content: flex-start; margin-bottom: 32px;">
                        <div style="max-width: 75%; background: white; border: 2px solid var(--gray-200); border-radius: 20px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                </svg>
                                <span style="color: var(--purple-600); font-weight: 600;">Lan</span>
                            </div>
                            <p style="color: var(--gray-800); line-height: 1.7; margin-bottom: 8px;">
                                Hello dear mama! ðŸ’• I'm Lan, your AI companion. I'm here for you 24/7, whether you need advice about baby care, emotional support, or just someone to talk to during those late-night feeds. How can I help you today?
                            </p>
                            <p style="color: var(--gray-500); font-size: 0.875rem;">Just now</p>
                        </div>
                    </div>

                    <!-- Quick Questions (shown initially) -->
                    <div id="quick-questions" style="margin-bottom: 32px;">
                        <p style="color: var(--gray-600); margin-bottom: 16px; font-weight: 500;">Quick questions to get started:</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px;">
                            <button onclick="sendQuickQuestion('Baby won\'t latch properly')" style="background: white; border: 2px solid var(--gray-200); border-radius: 16px; padding: 20px; text-align: left; cursor: pointer; transition: all 0.2s;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--pink-500)" stroke-width="2">
                                        <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                                    </svg>
                                    <span style="color: var(--gray-800); font-weight: 600;">Baby won't latch properly</span>
                                </div>
                            </button>

                            <button onclick="sendQuickQuestion('Sleep training tips')" style="background: white; border: 2px solid var(--gray-200); border-radius: 16px; padding: 20px; text-align: left; cursor: pointer; transition: all 0.2s;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2">
                                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                    </svg>
                                    <span style="color: var(--gray-800); font-weight: 600;">Sleep training tips</span>
                                </div>
                            </button>

                            <button onclick="sendQuickQuestion('Feeling overwhelmed')" style="background: white; border: 2px solid var(--gray-200); border-radius: 16px; padding: 20px; text-align: left; cursor: pointer; transition: all 0.2s;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ec4899" stroke-width="2">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                    </svg>
                                    <span style="color: var(--gray-800); font-weight: 600;">Feeling overwhelmed</span>
                                </div>
                            </button>

                            <button onclick="sendQuickQuestion('Is this symptom normal?')" style="background: white; border: 2px solid var(--gray-200); border-radius: 16px; padding: 20px; text-align: left; cursor: pointer; transition: all 0.2s;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="8" x2="12" y2="12"></line>
                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                    </svg>
                                    <span style="color: var(--gray-800); font-weight: 600;">Is this symptom normal?</span>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div style="background: white; border-top: 2px solid var(--gray-200); padding: 24px;">
                <div style="max-width: 900px; margin: 0 auto;">
                    <div style="display: flex; gap: 16px; align-items: center; background: var(--gray-50); border: 2px solid var(--gray-200); border-radius: 16px; padding: 16px;">
                        <input 
                            type="text" 
                            id="chat-input" 
                            placeholder="Type your message..."
                            style="flex: 1; border: none; background: transparent; outline: none; font-size: 1rem; color: var(--gray-800);"
                            onkeypress="if(event.key === 'Enter') sendMessage()"
                        >
                        <button onclick="sendMessage()" style="background: linear-gradient(135deg, var(--pink-500), var(--purple-500)); color: white; border: none; border-radius: 12px; padding: 12px 24px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-weight: 600;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                            Send
                        </button>
                    </div>
                    <p style="text-align: center; color: var(--gray-500); font-size: 0.875rem; margin-top: 16px;">
                        ðŸ’¡ Lan provides support and information, but is not a replacement for professional medical advice
                    </p>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div style="width: 350px; background: white; border-left: 2px solid var(--gray-200); padding: 32px; overflow-y: auto;">
            <h3 style="margin-bottom: 24px;">About Lan</h3>
            <div style="background: linear-gradient(135deg, var(--purple-50), var(--pink-50)); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                <div style="display: flex; justify-content: center; margin-bottom: 16px;">
                    <div style="background: linear-gradient(135deg, var(--purple-400), var(--pink-400)); width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                        </svg>
                    </div>
                </div>
                <p style="text-align: center; color: var(--purple-900); line-height: 1.6;">
                    I'm here to provide support, answer questions, and offer comfort whenever you need it.
                </p>
            </div>

            <h4 style="margin-bottom: 16px; color: var(--gray-800);">I can help with:</h4>
            <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 32px;">
                <div style="display: flex; gap: 12px; align-items: start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--pink-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span style="color: var(--gray-700);">Feeding & nutrition advice</span>
                </div>
                <div style="display: flex; gap: 12px; align-items: start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--pink-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span style="color: var(--gray-700);">Sleep patterns & training</span>
                </div>
                <div style="display: flex; gap: 12px; align-items: start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--pink-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span style="color: var(--gray-700);">Emotional support</span>
                </div>
                <div style="display: flex; gap: 12px; align-items: start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--pink-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span style="color: var(--gray-700);">Common baby health concerns</span>
                </div>
                <div style="display: flex; gap: 12px; align-items: start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--pink-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span style="color: var(--gray-700);">Breastfeeding guidance</span>
                </div>
                <div style="display: flex; gap: 12px; align-items: start;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--pink-500)" stroke-width="2" style="flex-shrink: 0; margin-top: 2px;">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <span style="color: var(--gray-700);">Postpartum recovery tips</span>
                </div>
            </div>

            <div style="background: #fef3c7; border: 2px solid #fbbf24; border-radius: 16px; padding: 20px;">
                <h4 style="color: #92400e; margin-bottom: 12px;">ðŸ’¡ Remember</h4>
                <p style="color: #78350f; font-size: 0.875rem; line-height: 1.6;">
                    While I provide helpful information and support, I'm not a substitute for professional medical advice. Always consult your healthcare provider for medical concerns.
                </p>
            </div>
        </div>
    </div>

    <script>
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Hide quick questions after first message
            const quickQuestions = document.getElementById('quick-questions');
            if (quickQuestions) {
                quickQuestions.style.display = 'none';
            }
            
            const messagesContainer = document.getElementById('chat-messages').querySelector('div');
            
            // Add user message
            const userMessageHTML = `
                <div style="display: flex; justify-content: flex-end; margin-bottom: 32px;">
                    <div style="max-width: 75%; background: linear-gradient(135deg, var(--pink-500), var(--pink-600)); border-radius: 20px; padding: 24px; box-shadow: 0 4px 12px rgba(236, 72, 153, 0.2);">
                        <p style="color: white; line-height: 1.7; margin-bottom: 8px;">${message}</p>
                        <p style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">Just now</p>
                    </div>
                </div>
            `;
            
            messagesContainer.insertAdjacentHTML('beforeend', userMessageHTML);
            
            // Clear input
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const responses = [
                    "I understand how challenging that can be. Let me help you with that. When it comes to latching, positioning is key. Try the 'C-hold' technique: support your breast with your hand in a C-shape, and bring baby to breast (not breast to baby). Baby's nose should be level with your nipple. Would you like more detailed guidance on this?",
                    "Sleep training can feel overwhelming, but you're doing great by seeking information. At this age, establishing a consistent bedtime routine is essential. This might include: a warm bath, gentle massage, feeding, and quiet time. The key is consistency. What's your current bedtime routine like?",
                    "I hear you, mama. It's completely normal to feel overwhelmedâ€”motherhood is one of the most demanding jobs there is. Remember: you're doing better than you think. Have you been able to take any time for yourself today? Even 5 minutes of deep breathing can help reset your nervous system.",
                    "I'm here to help, though I always recommend consulting with your healthcare provider for medical concerns. Can you describe the symptom you're noticing? I can provide general information and help you determine if it warrants contacting your doctor."
                ];
                
                const aiResponse = responses[Math.floor(Math.random() * responses.length)];
                
                const aiMessageHTML = `
                    <div style="display: flex; justify-content: flex-start; margin-bottom: 32px;">
                        <div style="max-width: 75%; background: white; border: 2px solid var(--gray-200); border-radius: 20px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                </svg>
                                <span style="color: var(--purple-600); font-weight: 600;">Lan</span>
                            </div>
                            <p style="color: var(--gray-800); line-height: 1.7; margin-bottom: 8px;">${aiResponse}</p>
                            <p style="color: var(--gray-500); font-size: 0.875rem;">Just now</p>
                        </div>
                    </div>
                `;
                
                messagesContainer.insertAdjacentHTML('beforeend', aiMessageHTML);
                
                // Scroll to bottom
                const chatMessages = document.getElementById('chat-messages');
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1000);
            
            // Scroll to bottom
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function sendQuickQuestion(question) {
            document.getElementById('chat-input').value = question;
            sendMessage();
        }
    </script>
<script type="module" src="./src/auth-ui.js"></script>
<script type="module">
  import { auth } from "./src/firebase.js";
  import { onAuthStateChanged, signOut } 
    from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const signInBtn = document.getElementById("nav-signin");
  const getStartedBtn = document.getElementById("nav-getstarted");
  const logoutBtn = document.getElementById("nav-logout");

  onAuthStateChanged(auth, (user) => {
    if (user) {
      // âœ… USER LOGGED IN
      signInBtn.style.display = "none";
      getStartedBtn.style.display = "none";
      logoutBtn.style.display = "inline-block";
    } else {
      // âŒ USER LOGGED OUT
      signInBtn.style.display = "inline-block";
      getStartedBtn.style.display = "inline-block";
      logoutBtn.style.display = "none";
    }
  });

  logoutBtn.addEventListener("click", async (e) => {
    e.preventDefault();
    await signOut(auth);
    window.location.href = "index.html";
  });
</script>

</body>
</html>
